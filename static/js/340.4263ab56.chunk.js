"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[340],{9340:function(n,e,t){t.r(e),t.d(e,{default:function(){return z}});var r=t(9439),a=t(1614),i=t(4554),o=t(890),s=t(6151),l=t(2419),c=t(2791),u=t(9953),d=t(5985),m=t(5189),x=t(6170),h=t(948),p=t(184);function f(n){var e=n.number,t=n.changeInput;return(0,p.jsx)(h.HH,{format:"(###) ### ## ##",mask:"_",allowEmptyFormatting:!0,customInput:x.Z,name:"number",type:"tel",value:e,onChange:t,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",required:!0,label:"number",variant:"outlined",fullWidth:!0})}function v(n){var e=n.name,t=n.changeInput;return(0,p.jsx)(x.Z,{name:"name",type:"text",value:e,onChange:t,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",required:!0,label:"name",variant:"outlined",fullWidth:!0})}function j(n){var e=n.onClose,t=(0,c.useState)(""),o=(0,r.Z)(t,2),l=o[0],u=o[1],x=(0,c.useState)(""),h=(0,r.Z)(x,2),j=h[0],Z=h[1],g=(0,m.Tn)(),b=(0,r.Z)(g,1)[0],y=(0,m.wY)().data,C=function(n){var e=n.target.name,t=n.target.value;switch(e){case"name":return u(t);case"number":return Z(t);default:return}};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(a.Z,{children:(0,p.jsx)("form",{onSubmit:function(n){if(n.preventDefault(),y.find((function(n){return n.name===l})))return d.Am.info("".concat(l," is alredy in contacts"));b({name:l,number:j}).unwrap().then(d.Am.success("Contact created")).catch((function(n){return 400===(null===n||void 0===n?void 0:n.status)?d.Am.error("Error created contact"):401===(null===n||void 0===n?void 0:n.status)?d.Am.error("Please authorization"):void 0})),u(""),Z(""),e(!1)()},children:(0,p.jsxs)(i.Z,{display:"flex",flexDirection:"column",gap:2,children:[(0,p.jsx)(v,{name:l,changeInput:C}),(0,p.jsx)(f,{number:j,changeInput:C}),(0,p.jsxs)(i.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(s.Z,{variant:"outlined",color:"primary",type:"submit",children:"add contact"}),(0,p.jsx)(s.Z,{onClick:e(!1),variant:"outlined",color:"error",type:"button",children:"cancel"})]})]})})})})}function Z(n){var e=n.showDrawer,t=n.onClose;return(0,p.jsx)("div",{children:(0,p.jsxs)(u.ZP,{anchor:"right",open:e,onClose:t(!1),PaperProps:{sx:{width:"300px",bgcolor:"transparent",display:"flex",alignItems:"center",justifyContent:"center"}},children:[(0,p.jsx)(o.Z,{variant:"h6",component:"p",textAlign:"center",children:"Creat a new contact"}),(0,p.jsx)(j,{onClose:t})]})})}var g=t(1413),b=t(5048),y=t(493),C=t(6895),w=t(383),I=t(9e3),A=t(4852),k=t(3044),D=t(6259);function S(n){var e=n.contact,t=n.onClose,a=e.id,o=e.name,l=e.number,u=(0,c.useState)(o),x=(0,r.Z)(u,2),h=x[0],j=x[1],Z=(0,c.useState)(l),g=(0,r.Z)(Z,2),b=g[0],y=g[1],C=(0,m.wv)(),w=(0,r.Z)(C,1)[0],I=function(n){switch(n.target.name){case"name":return j(n.target.value);case"number":return y(n.target.value);default:return}};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(i.Z,{component:"form",onSubmit:function(n){n.preventDefault(),w({id:a,name:h,number:b}).unwrap().then(d.Am.success("Contact updated")).catch((function(n){return 400===(null===n||void 0===n?void 0:n.status)?d.Am.error("Error updated contact"):401===(null===n||void 0===n?void 0:n.status)?d.Am.error("Please authorization"):void 0})),t()},display:"flex",flexDirection:"column",gap:"20px",children:[(0,p.jsx)(v,{name:h,changeInput:I}),(0,p.jsx)(f,{number:b,changeInput:I}),(0,p.jsxs)(i.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(s.Z,{variant:"outlined",color:"primary",type:"submit",children:"update contact"}),(0,p.jsx)(s.Z,{variant:"outlined",color:"error",type:"button",onClick:t,children:"cancel"})]})]})})}function _(n){var e=n.id,t=n.name,a=n.number,l=(0,c.useState)(!1),u=(0,r.Z)(l,2),d=u[0],x=u[1],h=function(){x(!d),d&&x(!d)},f=(0,m.Nt)(),v=(0,r.Z)(f,2),j=v[0],Z=v[1].isLoading;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(A.ZP,{disablePadding:!0,sx:{display:"flex",justifyContent:"space-between"},children:[(0,p.jsxs)(i.Z,{display:"flex",gap:1,alignItems:"center",children:[(0,p.jsx)(k.Z,{sx:{mr:2},alt:t}),(0,p.jsx)(D.Z,{primary:(0,p.jsx)(o.Z,{color:"#fff",children:t}),secondary:(0,p.jsx)(o.Z,{children:a})})]}),(0,p.jsxs)(i.Z,{display:"flex",gap:1,children:[(0,p.jsx)(s.Z,{onClick:h,disabled:Z,type:"button",variant:"outlined",color:"primary",sx:{mr:2,p:0,minWidth:0},children:(0,p.jsx)(I.Z,{})}),(0,p.jsx)(s.Z,{onClick:function(){return j(e)},disabled:Z,type:"button",variant:"outlined",color:"error",sx:{p:0,minWidth:0},children:(0,p.jsx)(w.Z,{})})]})]}),d&&(0,p.jsx)(S,{contact:{id:e,name:t,number:a},onClose:h})]})}function F(){var n,e=(0,b.v9)(C.AD),t=(0,m.wY)(e),r=t.currentData,a=t.isLoading,i=t.isSuccess;if(!r&&a)return(0,p.jsx)(o.Z,{variant:"h6",children:"Loading..."});if(null===r||void 0===r||!r.length)return(0,p.jsx)(o.Z,{variant:"h6",children:"Contact list is empty"});return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(y.Z,{sx:{width:"100%"},children:i&&(null===(n=function(){var n=e.trim().toLowerCase();return null===r||void 0===r?void 0:r.filter((function(e){var t=e.name;return null===t||void 0===t?void 0:t.toLowerCase().includes(n)}))}())||void 0===n?void 0:n.map((function(n){return(0,p.jsx)(_,(0,g.Z)({},n),n.id)})))})})}function P(){var n=(0,b.v9)(C.AD),e=(0,b.I0)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x.Z,{type:"text",name:"filter",value:n,onChange:function(n){return e((0,C.Tv)(n.target.value))},label:"Find contact by name",variant:"filled",fullWidth:!0})})}function z(){var n=(0,c.useState)(!1),e=(0,r.Z)(n,2),t=e[0],u=e[1],d=function(n){return function(){u(n)}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,p.jsxs)(i.Z,{display:"flex",alignItems:"center",flexDirection:"column",width:"400px",minHeight:"350px",gap:2,children:[(0,p.jsxs)(i.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,p.jsx)(o.Z,{variant:"h4",component:"p",textAlign:"center",children:"Contacts"}),(0,p.jsx)(s.Z,{onClick:d(!0),variant:"outlined",type:"button",children:(0,p.jsx)(l.Z,{})})]}),(0,p.jsx)(P,{}),(0,p.jsx)(F,{})]})}),(0,p.jsx)(Z,{showDrawer:t,onClose:d})]})}}}]);
//# sourceMappingURL=340.4263ab56.chunk.js.map